<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Votação Livre</title>

<script src="https://unpkg.com/@supabase/supabase-js@2"></script>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #0f0f0f;
  color: #fff;
}

.container {
  max-width: 420px;
  margin: auto;
  padding: 40px 20px;
}

.hero-card {
  background: #1c1c1c;
  border-radius: 16px;
  padding: 25px;
  text-align: center;
  margin-bottom: 25px;
}

button {
  width: 100%;
  padding: 16px;
  border: none;
  border-radius: 12px;
  background: linear-gradient(90deg,#ff8c00,#8a2be2);
  color: #fff;
  font-size: 16px;
  cursor: pointer;
}

button.loading {
  opacity: .7;
}
</style>
</head>

<body>

<div class="container">

  <div class="hero-card">
    <h1>Votação Aberta</h1>
    <p>Você pode votar quantas vezes quiser.</p>
  </div>

  <button id="botaoVotar">VOTAR</button>

</div>

<script>
/* ================= SUPABASE ================= */

const _supabase = window.supabase.createClient(
  'https://vchvvvvzulrkovjmiokg.supabase.co',
  'sb_publishable_I3Ict1JU5p_o_hoON_Dc1w__8NArqNe'
);

/* ================= PARTICIPANTES ================= */

const participantes = [
  'Gretla',
  'Lady Gagá',
  'Selca',
  'Felipe Feto'
];

/* ================= VOTAÇÃO LIVRE ================= */

document.getElementById("botaoVotar").onclick = async () => {
  const btn = document.getElementById("botaoVotar");
  btn.classList.add("loading");
  btn.innerText = "Enviando votos...";

  try {
    for (const nome of participantes) {
      await _supabase.from('bparedao5').insert([{ participante: nome }]);
      await _supabase.from('bparedao5').insert([{ participante: nome }]);
    }

    btn.innerText = "VOTAR NOVAMENTE";

  } catch (e) {
    console.error(e);
    alert("Erro ao enviar votos");
    btn.innerText = "VOTAR";
  }

  btn.classList.remove("loading");
};
</script>

</body>
</html>
