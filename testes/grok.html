<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Enquete</title>

  2
<link rel="stylesheet" href="enquete.css">

<!-- Fonte Inter -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<!-- reCAPTCHA -->
<script src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit" async defer></script>

</head>

<style>
  :root {
    --cor-primaria: #0aaac0;
    --cor-primaria-escura: #08889a;
    --cor-hover: #f5faff;
    --radius-grande: 28px;
    --radius-medio: 18px;
    --radius-pequeno: 14px;
    --shadow-soft: 0 12px 35px rgba(0,0,0,0.09);
    --shadow-popup: 0 20px 50px rgba(0,0,0,0.28);
    --transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-fast: all 0.25s ease;
  }

  /* BASE */
  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: #f1f5fa;
    margin: 0;
    padding: 20px;
    min-height: 100vh;
  }

  .enquete {
    max-width: 420px;
    margin: 0 auto;
    background: background: #fff;
    border-radius: var(--radius-grande);
    overflow: hidden;
    box-shadow: var(--shadow-soft);
    animation: entraEnquete 0.7s ease outwards;
  }

  @keyframes entraEnquete {
    from { opacity: 0; transform: translateY(0, 30px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  /* TÍTULO */
  .header {
    padding: 34px 25px 20px;
    text-align: center;
  }

  .header h1 {
    margin: 0;
    font-size: 30px;
    font-weight: 800;
    letter-spacing: -0.8px;
    background: linear-gradient(135deg, #0aaac0, #00d4d4);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: tituloGlow 3s infinite alternate;
  }

  @keyframes tituloGlow {
    from { filter: brightness(1); }
    to   { filter: brightness(1.15); }
  }

  .header p {
    margin: 12px 0 0;
    font-size: 23px;
    font-weight: 700;
    line-height: 1.35;
    color: #333;
    animation: fadeInUp 0.8s 0.2s both;
  }

  /* PARTICIPANTE */
  .participante {
    position: relative;
    overflow: hidden;
    animation: fadeInUp 0.6s both;
    animation-delay: calc(0.1s * var(--i, 0));
  }

  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(20px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  .info {
    display: flex;
    align-items: center;
    padding: 16px;
    gap: 16px;
    cursor: pointer;
    transition: var(--transition-fast);
    position: relative;
    border-radius: var(--radius-pequeno);
    overflow: hidden;
  }

  .info::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--cor-primaria);
    transform: scale(0);
    border-radius: 50%;
    opacity: 0;
    transition: transform 0.5s, opacity 0.5s;
    pointer-events: none;
  }

  .info.ripple::before {
    animation: rippleEffect 0.6s ease-out;
  }

  @keyframes rippleEffect {
    to {
      transform: scale(4);
      opacity: 0;
    }
  }

  .info:hover {
    background: var(--cor-hover);
    transform: translateY(-2px);
  }

  .foto {
    width: 80px;
    height: 80px;
    border-radius: var(--radius-pequeno);
    object-fit: cover;
    flex-shrink: 0;
    transition: var(--transition);
    box-shadow: 0 4px 12px rgba(0,0,0,0.12);
  }

  .texto {
    flex: 1;
    animation: fadeIn 0.8s both;
  }

  .nome {
    font-size: 20px;
    font-weight: 700;
    margin-bottom: 4px;
    transition: color 0.3s;
  }

  .clique {
    font-size: 15px;
    color: #777;
    transition: color 0.3s;
  }

  /* ESTADO SELECIONADO — ANIMADO */
  .participante.selecionado .info {
    background: var(--cor-primaria);
    color: white;
    border-radius: var(--radius-medio);
    margin: 10px 10px 0;
    transform: scale(1.02);
    box-shadow: 0 10px 30px rgba(10,170,192,0.35);
    animation: selecionadoPulse 0.4s ease;
  }

  @keyframes selecionadoPulse {
    0%   { transform: scale(1); }
    50%  { transform: scale(1.04); }
    100% { transform: scale(1.02); }
  }

  .participante.selecionado .clique {
    color: #eaffff;
  }

  .participante.selecionado .foto {
    transform: scale(1.08);
    box-shadow: 0 8px 25px rgba(0,0,0,0.35);
  }

  /* CAPTCHA */
  .captcha-wrapper {
    background: #fafdff;
    border: 1px solid #cce4f0;
    border-top: none;
    margin: 0 10px 10px;
    border-radius: 0 0 var(--radius-medio) var(--radius-medio);
    max-height: 0;
    overflow: hidden;
    padding: 0 22px;
    transition: all 0.45s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .captcha-wrapper.aberto {
    max-height: 400px;
    padding: 26px 22px;
    box-shadow: inset 0 8px 20px rgba(10,170,192,0.12);
  }

  /* BOTÃO VOTAR */
  .btn-votar {
    background: #cfcfcf;
    color: white;
    border: none;
    border-radius: var(--radius-pequeno);
    padding: 17px;
    width: calc(100% - 20px);
    margin: 10px;
    font-size: 19px;
    font-weight: 600;
    cursor: not-allowed;
    transition: var(--transition-fast);
    position: relative;
    overflow: hidden;
  }

  .btn-votar.habilitado {
    background: var(--cor-primaria);
    cursor: pointer;
    animation: pulseButton 2s infinite;
  }

  .btn-votar.habilitado:hover {
    background: var(--cor-primaria-escura);
    transform: translateY(-2px);
    box-shadow: 0 10px 25px rgba(10,170,192,0.4);
  }

  @keyframes pulseButton {
    0%, 100% { box-shadow: 0 0 0 0 rgba(10,170,192,0.4); }
    50%      { box-shadow:0 0 0 12px rgba(10,170,192,0); }
  }

  /* POPUP */
  .overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.7);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 99999;
    backdrop-filter: blur(6px);
  }

  .overlay.mostrar {
    display: flex;
    animation: fadeIn 0.4s;
  }

  .popup {
    background: white;
    width: 90%;
    max-width: 360px;
    border-radius: var(--radius-grande);
    overflow: hidden;
    text-align: center;
    box-shadow: var(--shadow-popup);
    transform: scale(0.8);
    animation: popupEntrar 0.5s cubic-bezier(0.18, 0.89, 0.32, 1.28) forwards;
  }

  @keyframes popupEntrar {
    to {
      transform: scale(1);
    }
  }

  .popup-cabecalho {
    background: linear-gradient(135deg, var(--cor-primaria), #00e0e0);
    color: white;
    padding: 22px;
    font-size: 21px;
    font-weight: 700;
  }

  .popup-conteudo {
    padding: 30px 24px;
  }

  .popup-conteudo img {
    width: 100px;
    height: 100px;
    border-radius: 18px;
    object-fit: cover;
    margin-bottom: 18px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.2);
    animation: fotoPopup 0.8s 0.3s both;
  }

  @keyframes fotoPopup {
    from { opacity: 0; transform: scale(0.8) rotate(-10deg); }
    to   { opacity: 1; transform: scale(1) rotate(0); }
  }

  .popup-conteudo h2 {
    margin: 0 0 22px;
    font-size: 24px;
    font-weight: 700;
  }

  .btn-novamente {
    background: var(--cor-primaria);
    color: white;
    border: none;
    padding: 16px;
    width: 100%;
    border-radius: var(--radius-pequeno);
    font-size: 18px;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-fast);
  }

  .btn-novamente:hover {
    background: var(--cor-primaria-escura);
    transform: translateY(-3px);
    box-shadow: 0 10px 25px rgba(10,170,192,0.4);
  }
</style>
<body>

<div class="enquete">

  <!-- TÍTULO -->
  <div class="header">
    <h1>ENQUETE</h1>
    <p>Quem você quer que FIQUE em "A Fazenda 17"?</p>
  </div>

  <!-- PARTICIPANTE 1 -->
  <div class="participante" data-nome="Mesquita">
    <div class="info">
      <img class="foto" src="https://cloudfront-us-east-1.images.arcpublishing.com/newr7/SMTPBVYQKJA6NALLFXPR7X2OEU.jpg" alt="">
      <div class="texto">
        <div class="nome">Mesquita</div>
        <div class="clique">Clique para votar</div>
      </div>
    </div>

    <!-- CAIXA CAPTCHA -->
    <div class="captcha-wrapper">
      <div class="captcha-box">
        <!-- SUA DIV DO CAPTCHA AQUI -->
        <div class="captcha-placeholder">
          <p>Aqui entra o CAPTCHA dessa opção</p>
        </div>

        <button class="btn-votar">votar</button>
      </div>
    </div>
  </div>

  <!-- PARTICIPANTE 2 -->
  <div class="participante" data-nome="Ray">
    <div class="info">
      <img class="foto" src="https://cloudfront-us-east-1.images.arcpublishing.com/newr7/6NDU3EL2QVBURKE2WHCUDDCOQ4.jpg" alt="">
      <div class="texto">
        <div class="nome">Ray</div>
        <div class="clique">Clique para votar</div>
      </div>
    </div>

    <!-- CAIXA CAPTCHA -->
    <div class="captcha-wrapper">
      <div class="captcha-box">
        <div class="captcha-placeholder">
          <p>Aqui entra o CAPTCHA dessa opção</p>
        </div>

        <button class="btn-votar">votar</button>
      </div>
    </div>
  </div>

  <!-- PARTICIPANTE 3 -->
  <div class="participante" data-nome="Toninho">
    <div class="info">
      <img class="foto" src="https://cloudfront-us-east-1.images.arcpublishing.com/newr7/GWAIB53P3JB2RAIEEVZB2QA4TU.jpg" alt="">
      <div class="texto">
        <div class="nome">Toninho</div>
        <div class="clique">Clique para votar</div>
      </div>
    </div>

    <!-- CAIXA CAPTCHA -->
    <div class="captcha-wrapper">
      <div class="captcha-box">
        <div class="captcha-placeholder">
          <p>Aqui entra o CAPTCHA dessa opção</p>
        </div>

        <button class="btn-votar">votar</button>
      </div>
    </div>
  </div>

</div>

<!-- POPUP DE VOTO CONFIRMADO -->
<div class="overlay" id="popupConfirmacao">
  <div class="popup">
    <div class="popup-cabecalho">Seu voto</div>

    <div class="popup-conteudo">
      <img id="popupFoto" src="" alt="">
      <h2 id="popupNome"></h2>

      <button class="btn-novamente" onclick="location.reload()">
        Votar Novamente
      </button>
    </div>
  </div>
</div>


</body>

<script>
let participanteSelecionado = null;
window.recaptchaWidgets = {};
window.recaptchaCarregado = false;
const participantes = document.querySelectorAll(".participante");
const popupConfirmacao = document.getElementById("popupConfirmacao");

const IDs_PARTICIPANTES = ["Mesquita", "Ray", "Toninho"];
const SITE_KEY = "6LerWh4sAAAAAHpIbJkhbH558D1nXfz-gqdTNYqs"; 
  
window.onloadCallback = function () {
    window.recaptchaCarregado = true;
    
    IDs_PARTICIPANTES.forEach(nome => {
        criarCaptcha(nome);
    });
};

function criarCaptcha(nome) {
    const nomeMinusculo = nome.toLowerCase();
    
    const placeholder = document.querySelector(`.participante[data-nome="${nome}"] .captcha-placeholder`);
    
    const captchaID = `captcha-widget-${nomeMinusculo}`;
    placeholder.id = captchaID;

    placeholder.innerHTML = '';
    
    const btnVotar = document.querySelector(`.participante[data-nome="${nome}"] .btn-votar`);

    const widget = grecaptcha.render(captchaID, {
        sitekey: SITE_KEY,
        callback: function () {
            btnVotar.classList.add("habilitado");
            btnVotar.disabled = false;
        },
        'expired-callback': function() {
            btnVotar.classList.remove("habilitado");
            btnVotar.disabled = true;
        }
    });

    window.recaptchaWidgets[nome] = widget;
}

participantes.forEach(participante => {
    const info = participante.querySelector(".info");

    info.addEventListener("click", () => {
        const nome = participante.getAttribute("data-nome");
        
        if (participante === participanteSelecionado) {
            deselecionarParticipante(participante);
            participanteSelecionado = null;
        } else {
          
            if (participanteSelecionado) {
                deselecionarParticipante(participanteSelecionado);
            }
 
            selecionarParticipante(participante, nome);
            participanteSelecionado = participante;
        }
    });
});

function selecionarParticipante(participante, nome) {
    participante.classList.add("selecionado");
    
    const captchaWrapper = participante.querySelector(".captcha-wrapper");
    captchaWrapper.classList.add("aberto");
    
    const widgetId = window.recaptchaWidgets[nome];
    if (widgetId !== undefined) {
        grecaptcha.reset(widgetId);
    }
}

function deselecionarParticipante(participante) {
  
    participante.classList.remove("selecionado");
  
    const captchaWrapper = participante.querySelector(".captcha-wrapper");
    captchaWrapper.classList.remove("aberto");

    const btnVotar = participante.querySelector(".btn-votar");
    btnVotar.classList.remove("habilitado");
    btnVotar.disabled = true;
}

participantes.forEach(participante => {
    const btnVotar = participante.querySelector(".btn-votar");

    btnVotar.addEventListener("click", async (event) => {
        event.preventDefault(); 
        
        if (!btnVotar.classList.contains("habilitado")) {
            alert("Por favor, complete o reCAPTCHA primeiro.");
            return;
        }

        const nome = participante.getAttribute("data-nome");
        const fotoSrc = participante.querySelector(".foto").src;

        console.log(`Voto para ${nome} simulado com sucesso!`);

        exibirPopupConfirmacao(nome, fotoSrc);

        participantes.forEach(p => {
            p.querySelector(".info").style.pointerEvents = 'none';
        });
    });
});

function exibirPopupConfirmacao(nome, fotoSrc) {
    const popupNome = document.getElementById("popupNome");
    const popupFoto = document.getElementById("popupFoto");

    popupNome.textContent = `Voto em ${nome} CONFIRMADO!`;
    popupFoto.src = fotoSrc;
    
    popupConfirmacao.classList.add("mostrar");
}

</script>
</html>
