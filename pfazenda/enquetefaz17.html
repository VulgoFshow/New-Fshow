<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fshow/Votação</title>
  
  <link rel="icon" href="https://i.ibb.co/cc5m1B4z/Background-Eraser-20250812-194521006.webp" type="image/x-icon" />
  <link rel="apple-touch-icon" href="https://i.ibb.co/cc5m1B4z/Background-Eraser-20250812-194521006.webp" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />

  <link rel="icon" href="https://i.ibb.co/cc5m1B4z/Background-Eraser-20250812-194521006.webp" type="image/x-icon">
  <link rel="apple-touch-icon" href="https://i.ibb.co/cc5m1B4z/Background-Eraser-20250812-194521006.webp">

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: #f5f5f5;
      color: #222;
      overflow-x: hidden;
      padding: 20px;
    }

    .container {
      background: white;
      padding: 20px;
      border-radius: 14px;
      width: 95%;
      max-width: 600px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, .1);
      margin: 0 auto;
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
      font-size: clamp(20px, 5vw, 26px);
    }

    .option {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
      background: #f0f0f0;
      border: 2px solid #ccc;
      border-radius: 10px;
      overflow: hidden;
      cursor: pointer;
      transition: border-color .25s, box-shadow .25s;
    }

    .option:hover {
      filter: brightness(1.05);
    }

    .option input {
      display: none;
    }

    .option img {
      width: 40%;
      max-width: 120px;
      aspect-ratio: 4 / 3;
      object-fit: cover;
      flex-shrink: 0;
    }

    .option span {
      flex: 1;
      padding: 0 10px;
      font-size: clamp(16px, 4vw, 18px);
      font-weight: 600;
    }

    .option.selected {
      border-color: #00aaff;
      box-shadow: 0 0 10px #00aaff99;
    }

    button {
      width: 100%;
      margin-top: 20px;
      padding: 14px 0;
      font-size: 16px;
      border: none;
      border-radius: 10px;
      background: #00aaff;
      color: #fff;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.2s ease;
    }

    button:hover:not(:disabled) {
      background: #008ecc;
      transform: scale(1.03);
    }

    button:disabled {
      background: #ccc;
      cursor: not-allowed;
    }

    #botaoCaptcha {
      display: flex;
      align-items: center;
      justify-content: flex-start;
      background: #e6e6e6;
      border: 1px solid #ccc;
      border-radius: 6px;
      padding: 0 10px;
      cursor: pointer;
      height: 60px;
      box-shadow: 0 2px 6px rgb(0 0 0 / 0.1);
      color: #111;
      font-size: 14px;
      font-weight: 400;
      margin-top: 20px;
      width: 100%;
      gap: 10px;
      box-sizing: border-box;
    }

    .recaptcha-checkbox {
      flex-shrink: 0;
      width: 26px;
      height: 26px;
      background: white;
      border: 2px solid #ccc;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #botaoCaptcha[aria-pressed="true"] .recaptcha-checkbox {
      background-color: #00aaff;
      border-color: #00aaff;
    }

    .checkmark {
      width: 16px;
      height: 16px;
      display: none;
      stroke: white;
      stroke-width: 3;
      stroke-linecap: round;
      stroke-linejoin: round;
    }

    #botaoCaptcha[aria-pressed="true"] .checkmark {
      display: block;
    }

    .recaptcha-label {
      flex-grow: 1;
    }

    .recaptcha-icon {
      width: 30px;
      height: 30px;
      object-fit: contain;
    }

    #resultadoModal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      z-index: 9999;
      align-items: center;
      justify-content: center;
    }

    #resultadoModal > div {
      width: 90%;
      max-width: 800px;
      height: 90%;
      background: white;
      border-radius: 10px;
      overflow: hidden;
      position: relative;
    }

    #resultadoModal iframe {
      width: 100%;
      height: 100%;
      border: none;
    }

     footer {
      text-align: center;
      margin-top: 50px;
      font-size: 0.9em;
      color: #777;
    }
    
      #resultadoModal > div {
    width: 90%;
    max-width: 800px;
    height: 90%;
    background: white;
    border-radius: 10px;
    overflow: hidden;
    position: relative;
    display: flex;
    flex-direction: column;
  }

  #resultadoModal iframe {
    flex: 1;
    border: none;
  }

  #votarNovamente {
    width: 100%;
    padding: 14px 0;
    font-size: 16px;
    border: none;
    border-radius: 0 0 10px 10px;
    background: #00aaff;
    color: #fff;
    cursor: pointer;
    transition: background-color 0.3s, transform 0.2s ease;
  }

  #votarNovamente:hover {
    background: #008ecc;
    transform: scale(1.02);
  }
  
  </style>
</head>

<body>
 
  <div class="container" id="votoTela">
    <h1>Quem é o seu favorito na Fazenda 17?</h1>

    <label class="option">
      <input type="radio" name="vote" value="Creo Kellab" />
      <img src="https://github.com/VulgoFshow/New-Fshow/blob/main/pfazenda/a-fazenda-17-creo.jpg?raw=true" alt="Creo Kellab" />
      <span>Creo Kellab</span>
    </label>
<label class="option">
      <input type="radio" name="vote" value="Duda Wendling" />
      <img src="https://github.com/VulgoFshow/New-Fshow/blob/main/pfazenda/a-fazenda-17-duda.jpg?raw=true" alt="Duda Wendling" />
      <span>Duda Wendling</span>
    </label>
    <label class="option">
      <input type="radio" name="vote" value="Dudu Camargo" />
      <img src="https://github.com/VulgoFshow/New-Fshow/blob/main/pfazenda/a-fazenda-17-dudu.jpg?raw=true" alt="Dudu Camargo" />
      <span>Dudu Camargo</span>
    </label>
    <label class="option">
      <input type="radio" name="vote" value="Fabiano Moraes" />
      <img src="https://github.com/VulgoFshow/New-Fshow/blob/main/pfazenda/a-fazenda-17-fabiano.jpg?raw=true" alt="Fabiano Moraes" />
      <span>Fabiano Moraes</span>
    </label>
    <label class="option">
      <input type="radio" name="vote" value="Fernando Sampaio" />
      <img src="https://github.com/VulgoFshow/New-Fshow/blob/main/pfazenda/a-fazenda-17-fernando.jpg?raw=true" alt="Fernando Sampaio" />
      <span>Fernando Sampaio</span>
    </label>
    <label class="option">
      <input type="radio" name="vote" value="Gabily" />
      <img src="https://github.com/VulgoFshow/New-Fshow/blob/main/pfazenda/a-fazenda-17-gabily.jpg?raw=true" alt="Gabily" />
      <span>Gabily</span>
    </label>
    <label class="option">
      <input type="radio" name="vote" value="Gaby Spanic" />
      <img src="https://github.com/VulgoFshow/New-Fshow/blob/main/pfazenda/a-fazenda-17-gaby.jpg?raw=true" alt="Gaby Spanic" />
      <span>Gaby Spanic</span>
    </label>
    <label class="option">
      <input type="radio" name="vote" value="Guilherme Bouwry" />
        <img src="https://github.com/VulgoFshow/New-Fshow/blob/main/pfazenda/a-fazenda-17-guilherme.jpg?raw=true" alt="Guilherme Bouwry" />
      <span>Guilherme Bouwry</span>
    </label>
    <label class="option">
      <input type="radio" name="vote" value="Kathy Maravilha" />
      <img src="https://github.com/VulgoFshow/New-Fshow/blob/main/pfazenda/a-fazenda-17-kathy.jpg?raw=true" alt="Kathy Maravilha" />
      <span>Kathy Maravilha</span>
    </label>
    <label class="option">
        <input type="radio" name="vote" value="Maria Caporusso" />
      <img src="https://github.com/VulgoFshow/New-Fshow/blob/main/pfazenda/a-fazenda-17-maria.jpg?raw=true" alt="Maria Caporusso" />
      <span>Maria Caporusso</span>
    </label>
    <label class="option">
      <input type="radio" name="vote" value="Martina Sanzi" />
      <img src="https://github.com/VulgoFshow/New-Fshow/blob/main/pfazenda/a-fazenda-17-martina.jpg?raw=true" alt="Martina Sanzi" />
      <span>Martina Sanzi</span>
    </label>
    <label class="option">
      <input type="radio" name="vote" value="Luiz Mesquita" />
      <img src="https://github.com/VulgoFshow/New-Fshow/blob/main/pfazenda/a-fazenda-17-luiz.jpg?raw=true" alt="Luiz Mesquita" />
      <span>Luiz Mesquita</span>
    </label>
    <label class="option">
      <input type="radio" name="vote" value="Michelle Barros" />
      <img src="https://github.com/VulgoFshow/New-Fshow/blob/main/pfazenda/a-fazenda-17-michelle.jpg?raw=true" alt="Michelle Barros" />
      <span>Michelle Barros</span>
    </label>
    <label class="option">
      <input type="radio" name="vote" value="Nizam" />
      <img src="https://github.com/VulgoFshow/New-Fshow/blob/main/pfazenda/a-fazenda-17-nizam.jpg?raw=true" alt="Nizam" />
      <span>Nizam</span>
    </label>
    <label class="option">
      <input type="radio" name="vote" value="Rayane Figliuzzi" />
      <img src="https://github.com/VulgoFshow/New-Fshow/blob/main/pfazenda/a-fazenda-17-rayane.jpg?raw=true" alt="Rayane Figliuzzi" />
      <span>Rayane Figliuzzi</span>
    </label>
    <label class="option">
      <input type="radio" name="vote" value="Renata Muller" />
      <img src="https://github.com/VulgoFshow/New-Fshow/blob/main/pfazenda/a-fazenda-17-renata.jpg?raw=true" alt="Renata Muller" />
      <span>Renata Muller</span>
    </label>
    <label class="option">
      <input type="radio" name="vote" value="Saory Cardoso" />
      <img src="https://github.com/VulgoFshow/New-Fshow/blob/main/pfazenda/a-fazenda-17-saory.jpg?raw=true" alt="Saory Cardoso" />
      <span>Saory Cardoso</span>
    </label>
    <label class="option">
      <input type="radio" name="vote" value="Shia Phoenix" />
        <img src="https://github.com/VulgoFshow/New-Fshow/blob/main/pfazenda/a-fazenda-17-shia.jpg?raw=true" alt="Shia Phoenix" />
      <span>Shia Phoenix</span>
    </label>
    <label class="option">
      <input type="radio" name="vote" value="Tàmires Assis" />
      <img src="https://github.com/VulgoFshow/New-Fshow/blob/main/pfazenda/a-fazenda-17-tamires.jpg?raw=true" alt="Tàmires Assîs" />
      <span>Tàmires Assis</span>
    </label>
    <label class="option">
        <input type="radio" name="vote" value="Toninho Tornado" />
      <img src="https://github.com/VulgoFshow/New-Fshow/blob/main/pfazenda/a-fazenda-17-toninho.jpg?raw=true" alt="Toninho Tornado" />
      <span>Toninho Tornado</span>
    </label>
    <label class="option">
      <input type="radio" name="vote" value="Walério Araújo" />
      <img src="https://github.com/VulgoFshow/New-Fshow/blob/main/pfazenda/a-fazenda-17-walerio.jpg?raw=true" alt="Walério Araújo" />
      <span>Walério Araújo</span>
    </label>
    <label class="option">
      <input type="radio" name="vote" value="Wallas Arrais" />
      <img src="https://github.com/VulgoFshow/New-Fshow/blob/main/pfazenda/a-fazenda-17-wallas.jpg?raw=true" alt="Wallas Arrais" />
      <span>Wallas Arrais</span>
    </label>
    <label class="option">
      <input type="radio" name="vote" value="Will Guimarães" />
      <img src="https://github.com/VulgoFshow/New-Fshow/blob/main/pfazenda/a-fazenda-17-will.jpg?raw=true" alt="Will Guimarães" />
      <span>Will Guimarães</span>
    </label>
    <label class="option">
      <input type="radio" name="vote" value="Yoná Sousa" />
      <img src="https://github.com/VulgoFshow/New-Fshow/blob/main/pfazenda/a-fazenda-17-yona.jpg?raw=true" alt="Yoná Sousa" />
      <span>Yoná Sousa</span>
    </label>

    <button id="botaoCaptcha" aria-pressed="false" type="button">
      <span class="recaptcha-checkbox">
        <svg class="checkmark" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M4 12l6 6 10-10" />
        </svg>
      </span>
      <span class="recaptcha-label">Não sou um robô</span>
      <img class="recaptcha-icon" src="https://i.imgur.com/orZDpuE.png" alt="Captcha logo" />
    </button>

    <button id="botaoVotar" onclick="enviarVoto()" disabled>Votar</button>
  </div>
  
  <!-- Modal de Resultado -->
<div id="resultadoModal">
  <div>
    <iframe src="" id="iframeResultado"></iframe>
    <button id="votarNovamente">Votar novamente</button>
  </div>
</div>

<script>
 
  window.enviarVoto = async () => {
    const escolhido = [...document.querySelectorAll("input[name='vote']")].find(r => r.checked)?.value;

    if (!escolhido) {
      alert("Escolha um participante antes de votar.");
      return;
    }
    if (botaoCaptcha.getAttribute("aria-pressed") !== "true") {
      alert("Confirme que você não é um robô.");
      return;
    }

    const { error } = await supabase
      .from('fazendae17')
      .insert({ participante: escolhido });

    if (error) {
      alert('❌ Erro ao registrar voto: ' + error.message);
      console.error(error);
      return;
    }


    setTimeout(() => {
      document.getElementById("iframeResultado").src = "enqueteresultado.html"; 
      document.getElementById("resultadoModal").style.display = "flex";
    }, 500);
  };


document.getElementById("votarNovamente").addEventListener("click", () => {

  document.getElementById("resultadoModal").style.display = "none";

  document.querySelectorAll("input[name='vote']").forEach(r => r.checked = false);

  const botaoCaptcha = document.getElementById("botaoCaptcha");
  botaoCaptcha.setAttribute("aria-pressed", "false");
  botaoCaptcha.textContent = "Não sou um robô";
});

</script>


  <script type="module">
    import { createClient } from 'https://esm.sh/@supabase/supabase-js';

    const supabase = createClient(
      'https://maroopnrcrpoizpjhmss.supabase.co',
      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1hcm9vcG5yY3Jwb2l6cGpobXNzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI1Mzg1MDQsImV4cCI6MjA2ODExNDUwNH0.2CZWR_1CLCRLtpYkkd7wfMEeIt1oMpfn08ls8ItAXsw'
    );

    const botaoCaptcha = document.getElementById("botaoCaptcha");
    const botaoVotar = document.getElementById("botaoVotar");

    botaoCaptcha.addEventListener("click", () => {
      const marcado = botaoCaptcha.getAttribute("aria-pressed") === "true";
      botaoCaptcha.setAttribute("aria-pressed", (!marcado).toString());
      botaoVotar.disabled = marcado;
    });

    document.querySelectorAll(".option").forEach(label => {
      label.addEventListener("click", () => {
        document.querySelectorAll(".option").forEach(l => l.classList.remove("selected"));
        label.classList.add("selected");
        label.querySelector("input").checked = true;
      });
    });

    window.enviarVoto = async () => {
      const escolhido = [...document.querySelectorAll("input[name='vote']")].find(r => r.checked)?.value;

      if (!escolhido) {
        alert("Escolha um participante antes de votar.");
        return;
      }
      if (botaoCaptcha.getAttribute("aria-pressed") !== "true") {
        alert("Confirme que você não é um robô.");
        return;
      }

      const { error } = await supabase
        .from('fazendae17')
        .insert({ participante: escolhido });

      if (error) {
        alert('❌ Erro ao registrar voto: ' + error.message);
        console.error(error);
        return;
      }

      // Mostrar modal com resultados
      setTimeout(() => {
        document.getElementById("iframeResultado").src = "resultado.html";
        document.getElementById("resultadoModal").style.display = "flex";
      }, 500);
    };
    
    document.getElementById("votarNovamente").addEventListener("click", () => {
  document.getElementById("resultadoModal").style.display = "none";
  document.getElementById("iframeResultado").src = ""; // limpa resultado
  // Se quiser recarregar a votação:
  location.reload();
});

  </script>

   <footer>
    © 2025 Portal Flop / Fshow - Todos os direitos reservados.
  </footer>

</body>
</html>
